(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{d1bG:function(t,e,o){"use strict";o.r(e);var n=o("ofXK"),s=o("3Pt+"),i=o("kh9p"),r=o("iBw7"),a=o("mrSG"),c=o("9Z1F"),b=o("AytR"),u=o("Do2H"),l=o("fXoL"),d=o("tk/3"),p=function(t){function e(e){var o=t.call(this)||this;return o.http=e,o.uri=b.a.baseURL+"bonuses",o}return Object(a.d)(e,t),e.prototype.get=function(){return this.http.get(this.uri,{headers:this.headers}).pipe(Object(c.a)(this.handleError))},e.prototype.update=function(t){return this.http.put(this.uri,t,{headers:this.headers}).pipe(Object(c.a)(this.handleError))},e.\u0275fac=function(t){return new(t||e)(l.Sb(d.b))},e.\u0275prov=l.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(u.a),h=o("lDzL"),f=o("f07x"),m=o("ecX2");function v(t,e){if(1&t){var o=l.Pb();l.Ob(0,"button",22),l.Vb("click",(function(){l.sc(o);var t=e.row;return l.Yb().selectForApproval(t)})),l.Kb(1,"i",23),l.Nb(),l.Ob(2,"button",24),l.Vb("click",(function(){l.sc(o);var t=e.row;return l.Yb().disapprove(t)})),l.Kb(3,"i",25),l.Nb()}}function g(t,e){1&t&&(l.Ob(0,"label",42),l.Dc(1,"Please select a bonus percentage."),l.Nb())}var O=function(t){return{"has-danger":t}},N=function(){return{standalone:!0}},y=function(){return{singleSelection:!0,text:"Bonus percentage",classes:"selectpicker btn-danger",lazyLoading:!0,maxHeight:100}};function w(t,e){if(1&t){var o=l.Pb();l.Ob(0,"div",26),l.Ob(1,"div",27),l.Ob(2,"div",6),l.Kb(3,"p",28),l.Ob(4,"div",29),l.Kb(5,"div",30),l.Kb(6,"div",31),l.Kb(7,"div",32),l.Kb(8,"div",33),l.Ob(9,"a",34),l.Ob(10,"h4",5),l.Dc(11,"Bonus for:"),l.Nb(),l.Nb(),l.Ob(12,"p",35),l.Dc(13),l.Nb(),l.Nb(),l.Ob(14,"div",36),l.Ob(15,"div",37),l.Ob(16,"p",35),l.Dc(17," Bonus percentage"),l.Nb(),l.Ob(18,"angular2-multiselect",38),l.Vb("onSelect",(function(t){return l.sc(o),l.Yb().bonusPercentSelect(t)}))("onDeSelect",(function(){return l.sc(o),l.Yb().bonusPercentDeSelect()})),l.Nb(),l.Bc(19,g,2,0,"label",39),l.Nb(),l.Nb(),l.Ob(20,"div",40),l.Ob(21,"button",41),l.Vb("click",(function(){return l.sc(o),l.Yb().approvesBonus()})),l.Dc(22,"Approve bonus"),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Nb()}if(2&t){var n=l.Yb();l.fc("formGroup",n.bonusForm),l.xb(13),l.Fc(" ",n.bonusForPacient,""),l.xb(2),l.fc("ngClass",l.jc(8,O,!n.bonusForm.get("amount").valid)),l.xb(3),l.fc("data",n.bonusData)("ngModel",n.selectedBonus)("ngModelOptions",l.ic(10,N))("settings",l.ic(11,y)),l.xb(1),l.fc("ngIf",!n.bonusForm.get("amount").valid)}}var F=[{path:"",component:function(){function t(t,e,o,n){this.fb=t,this.alert=e,this.customToastr=o,this.bonusesService=n,this.entries=10,this.bonusData=[{id:1,itemName:"15"},{id:2,itemName:"25"},{id:3,itemName:"50"}],this.pacients=[],this.showBonus=!1,this.bonusForPacient=""}return t.prototype.ngOnInit=function(){this.initializeBonusForm(),this.getPacients()},t.prototype.getPacients=function(){var t=this;this.bonusesService.get().subscribe((function(e){t.pacients=e}),(function(e){t.customToastr.setError(e)}))},t.prototype.entriesChange=function(t){this.entries=t.target.value},t.prototype.initializeBonusForm=function(){this.bonusForm=this.fb.group({pacientId:new s.e(null),approved:new s.e(null),amount:new s.e(null,s.t.required)})},t.prototype.selectForApproval=function(t){this.showBonus=!0,this.bonusForPacient=t.pacientEmail,this.bonusForm.get("pacientId").setValue(t.pacientId),this.bonusForm.get("approved").setValue(!0)},t.prototype.transformToDecimal=function(t){return t/100},t.prototype.disapprove=function(t){this.showBonus=!1,this.bonusForm.get("pacientId").setValue(t.pacientId),this.bonusForm.get("approved").setValue(!1),this.bonusForm.get("amount").setValue(0),this.alert.showAlert("Are you sure you want to deny the bonus?","Yes, deny!",this.disaprovesBonus.bind(this))},t.prototype.approvesBonus=function(){var t=this;this.bonusForm.invalid?this.customToastr.setError("Please verify the entered data."):this.bonusesService.update(this.bonusForm.value).subscribe((function(e){t.customToastr.setSuccess("The bonus has been aproved successfully"),t.getPacients(),t.resetForm()}),(function(e){t.customToastr.setError(e)}))},t.prototype.disaprovesBonus=function(){var t=this;this.bonusesService.update(this.bonusForm.value).subscribe((function(e){t.customToastr.setSuccess("The bonus has been deny successfully"),t.getPacients()}),(function(e){t.customToastr.setError(e)}))},t.prototype.bonusPercentSelect=function(t){this.bonusForm.get("amount").setValue(this.transformToDecimal(t.itemName))},t.prototype.resetForm=function(){this.showBonus=!1,this.bonusForm.reset(),this.selectedBonus=[]},t.\u0275fac=function(e){return new(e||t)(l.Jb(s.d),l.Jb(i.a),l.Jb(r.a),l.Jb(p))},t.\u0275cmp=l.Db({type:t,selectors:[["app-bonus-dashboard"]],decls:31,vars:13,consts:[[1,"content"],[1,"row"],[1,"col-md-8"],[1,"card"],[1,"card-header"],[1,"title"],[1,"card-body"],[1,"toolbar"],[1,"dataTables_wrapper","py-4"],[1,"col-sm-12","col-md-6"],["id","datatable_length",1,"dataTables_length"],["name","datatable_length","aria-controls","datatable",1,"form-control","form-control-sm",3,"change"],["value","10",3,"selected"],["value","25",3,"selected"],["value","50",3,"selected"],["value","-1",3,"selected"],[1,"bootstrap","selection-cell",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows"],["name","Pacient email"],["name","Consultations quantity"],["name","Options","prop","option",3,"draggable","resizeable"],["ngx-datatable-cell-template",""],["class"," col-md-4",3,"formGroup",4,"ngIf"],["tooltip","Approve","type","button",1,"btn","btn-link","btn-sm","btn-icon",3,"click"],[1,"tim-icons","icon-check-2"],["tooltip","Disapprove","type","button",1,"btn","btn-danger","btn-link","btn-sm",3,"click"],[1,"tim-icons","icon-simple-remove"],[1,"col-md-4",3,"formGroup"],[1,"card","card-user"],[1,"card-text"],[1,"author"],[1,"block","block-one"],[1,"block","block-two"],[1,"block","block-three"],[1,"block","block-four"],["href","javascript:void(0)"],[1,"description"],[1,"card-description"],[1,"form-group","has-label",3,"ngClass"],["name","problematicConsultation",3,"data","ngModel","ngModelOptions","settings","onSelect","onDeSelect"],["class","error",4,"ngIf"],[1,"card-footer"],["type","submit",1,"btn","btn-fill","btn-danger",3,"click"],[1,"error"]],template:function(t,e){1&t&&(l.Ob(0,"div",0),l.Ob(1,"div",1),l.Ob(2,"div",2),l.Ob(3,"div",3),l.Ob(4,"div",4),l.Ob(5,"h2",5),l.Dc(6,"Pending bonuses"),l.Nb(),l.Nb(),l.Ob(7,"div",6),l.Kb(8,"div",7),l.Ob(9,"div",8),l.Ob(10,"div",1),l.Ob(11,"div",9),l.Ob(12,"div",10),l.Ob(13,"label"),l.Dc(14," Show "),l.Ob(15,"select",11),l.Vb("change",(function(t){return e.entriesChange(t)})),l.Ob(16,"option",12),l.Dc(17,"10"),l.Nb(),l.Ob(18,"option",13),l.Dc(19,"25"),l.Nb(),l.Ob(20,"option",14),l.Dc(21,"50"),l.Nb(),l.Ob(22,"option",15),l.Dc(23,"All"),l.Nb(),l.Nb(),l.Dc(24," entries "),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Ob(25,"ngx-datatable",16),l.Kb(26,"ngx-datatable-column",17),l.Kb(27,"ngx-datatable-column",18),l.Ob(28,"ngx-datatable-column",19),l.Bc(29,v,4,0,"ng-template",20),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Bc(30,w,23,12,"div",21),l.Nb(),l.Nb()),2&t&&(l.xb(16),l.fc("selected",10==e.entries),l.xb(2),l.fc("selected",25==e.entries),l.xb(2),l.fc("selected",50==e.entries),l.xb(2),l.fc("selected",-1==e.entries),l.xb(3),l.fc("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",-1!=e.entries?e.entries:void 0)("rows",e.pacients),l.xb(3),l.fc("draggable",!1)("resizeable",!1),l.xb(2),l.fc("ngIf",e.showBonus))},directives:[s.r,s.u,h.c,h.b,h.a,n.k,f.a,s.o,s.h,n.i,m.a,s.n,s.q],styles:[""]}),t}()}],k=o("tyNb");o.d(e,"BonusModule",(function(){return D}));var D=function(){function t(){}return t.\u0275mod=l.Hb({type:t}),t.\u0275inj=l.Gb({factory:function(e){return new(e||t)},imports:[[n.c,s.j,s.s.withConfig({warnOnNgModelWithFormControl:"never"}),m.b,h.d,f.b.forRoot(),k.f.forChild(F)]]}),t}()}}]);